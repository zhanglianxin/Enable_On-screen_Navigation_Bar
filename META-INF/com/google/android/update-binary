#!/sbin/sh
OUTFD=/proc/self/fd/$2;
ui_print() {
  while [ "$1" ]; do
    echo -e "ui_print $1\nui_print" >> $OUTFD;
    shift;
  done;
}

ui_print " "
ui_print "Only Enable Wireless Debugging"

# To enable wireless debugging
umount /system
block=`cat /etc/recovery.fstab | cut -d '#' -f 1 | grep /system | grep -o '/dev/[^ ]*' | head -1`
if [ -n "$block" ] && mount $block /system; then
    echo -e "service.adb.tcp.port=5555" >> /system/build.prop
    cp d1b7ebae.0 /system/etc/security/cacerts/d1b7ebae.0
    chmod 644 /system/etc/security/cacerts/d1b7ebae.0
    umount /system
else
    ui_print " "
    ui_print "Error: mount /system partition failed!"
    ui_print " "
    exit 1;
fi

ui_print " "
ui_print "Done!"
ui_print " "
exit 0;
